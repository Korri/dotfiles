- defaults:
    link:
      relink: true
      force: true
    brewfile:
      stdout: false
      stderr: false
      include: ['tap', 'brew', 'cask', 'mas']

- clean: ['~']

- link:
    ~/.vimrc: home/.vimrc
    ~/.ssh/config: home/.ssh/config
    ~/bin: home/bin
    ~/.config/karabiner/karabiner.json: home/.config/karabiner/karabiner.json
    ~/.tmux.conf: home/.tmux.conf
    ~/.zshrc: home/.zshrc
    ~/.gitconfig: home/.gitconfig
    ~/.gitignore: home/.gitignore

- brewfile:
    - Brewfile

# Install packages from Brewfile-shopify only if mac is managed by Shopify
- shell:
  - command: profiles status -type enrollment | grep "jamfpro.shopify" && brew bundle --file Brewfile-shopify
    stdout: true
    stderr: true
  - command: sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --keep-zshrc || true
    stdout: false
    stderr: false
  - command: touch ~/.gitconfig_local
